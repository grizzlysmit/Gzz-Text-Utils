<!doctype html>
<html lang="en">
<head>
<title>Gzz::Text::Utils</title>
<meta charset="UTF-8" />
<link href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAA/wAAAP8AAACGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABA
AAAA/wAAAP8AAAAAAAAA/wAAAP9NAbX/TQG13gAAAPsAAABAAAAAAAAAAP8AAAD/AAAAAAAAAEAA
AAD/TQG1/00Btf8AAAD/AAAA/wAAAP8AAAD/TQG1//8AAP9rAvv/AAAA/wAAAEAAAABlAAAAAAAA
AP8AAAD/awL7//8AAP9NAbX/AAAA+QAAAP8AAAAAAAAA/wAAAP9NAbX/TQG1/wAAAP8AAAD/AAAA
2gAAAP8AAAD/AAAA/00Btf9NAbX/AAAA/wAAANMAAAAJAAAAAAAAAAAAAABlAAAA/wAAAP8AnJz/
AOLi/wD///8A////ANjY/wCFhf8AAAD/AAAA/wAAAEAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAP8A
hYX/AP///wD///9rAvv/awL7/wD///8A////AIWF/wAAAP8AAAAAAAAAAAAAAAIAAAAAAAAAAAAA
AP8AAAD/AOPj/wD///9rAvv/AP///2sC+/8A////AP///wDj4/8AAAD/AAAA/wAAAAAAAAAAAAAA
AAAAAP8AAAD//35+/wD///8A////AP///wD///8A////AP///wD///8A////AAAA/wAAAP8AAAD/
AAAAAAAAAFYAAAD//35+/4UAAP8A////AIWF/wDT0/8A////AP///wCFhf8AxcX/AP///4UAAP+F
AAD/AAAA/wAAAAAAAACubycn/99vb//GAAD/XFxc//////9cXFz/AP///1xcXP//////XFxc/wAA
AP//fn7//35+/4UAAP8AAABAQAAA//8fH///fn7/AAAA//////8AAAD//////wAAAP//////AAAA
////////AAD/awL7/4UAAP//fn7/AAAA/1IoKP//fn7//35+//8AAP9cXFz//////wCFhf8A////
AIWF//////+FhYX//35+/4UAAP9rAvv//35+/wAAAP9mMjL//35+/2sC+///fn7/APsC/wAAAP8A
////AP///wD///8AAAD/AAAA//9+fv/9AAD//35+/wAAAP8AAAD/hQAA//9+fv9rAvv//35+/wD7
Av8AAAD/AAAAAAAAAEAAAAAAAAAAGQAAAP/RAACR/35+/wAAAP8A+wL/AAAA2gAAAGX/AADa/35+
//9+fv8AAAD/AAAAAAAAAAAAAAB7AAAAAAAAAEAAAAAAAAAA//0AAP//fn7//35+/wAAAGUAAAAP
AAAAZQAAAP8AAAD/AAAAAAAAAAAAAABlAAAA/4WFhQEAAAD/AAAAQAAAAAAAAAD/AAAA2gAAAGUA
AAAAj/kAAAZgAAADgAAAgAEAAOAHAADgBwAAwAMAAIABAACAAQAAAAEAAAAAAAAAAAAAAAAAAAPA
AACH4QAAzrMAAA==" rel="icon" type="image/x-icon" /><meta name="author" value="Francis Grizzly Smit (grizzly@smit.id.au)" />
<meta name="version" value="v0.1.15" />
<style>.comment {
  color: #666; }

.string {
  color: #006810; }

.string .source,
.string .meta.embedded.line {
  color: #5A5A5A; }

.string .punctuation.section.embedded {
  color: #920B2D; }

.string .punctuation.section.embedded .source {
  color: #920B2D; }

.constant.numeric {
  color: #D14; }

.constant.language {
  color: #606aa1; }

.constant.character,
.constant.other {
  color: #606aa1; }

.constant.symbol {
  color: #990073; }

.constant.numeric.line-number.find-in-files .match {
  color: rgba(143, 190, 0, 0.63); }

/* For 'rw', 'copy' etc. */
.entity.name.type.trait {
  color: #555CEE; }

.entity.name.type.class {
  color: #363F84; }

.variable.other {
  color: #CC0050; }

.variable {
  color: #08056B; }

.variable.parameter {
  color: #606aa1; }

.keyword {
  color: #222;
  font-weight: bold; }

.keyword.unit {
  color: #445588; }

.keyword.special-method {
  color: #0056C3; }

.storage {
  color: #222; }

.storage.type {
  color: #222; }

.entity.name.class {
  color: #606aa1; }

.entity.other.inherited-class {
  color: #606aa1; }

.entity.name.function {
  color: #900; }

/* Regex/Grammars */
.string.regexp.construct {
  color: #0078FF; }

/* `token`, `regex` */
.storage.type.declare.regexp.named {
  color: #393276; }

/* The name of the named regex */
.entity.name.function.regexp {
  color: #7415E9; }

.entity.name.function.regexp.named.TOP {
  color: #158de9; }

/* /<this>/ */
.variable.other.identifier.regexname {
  color: #a52020; }

.entity.name.tag {
  color: #008080; }

.entity.other.attribute-name {
  color: #458;
  font-weight: bold; }

.entity.name.filename.find-in-files {
  color: #E6DB74; }

.support.constant,
.support.function,
.support.type {
  color: #458; }

.support.class {
  color: #004040; }

.invalid {
  color: #F8F8F0;
  background-color: #00A8C6; }

.invalid.deprecated {
  color: #F8F8F0;
  background-color: #8FBE00; }

.meta.structure.dictionary.json > .string.quoted.double.json,
.meta.structure.dictionary.json > .string.quoted.double.json .punctuation.string {
  color: #000080; }

.meta.structure.dictionary.value.json > .string.quoted.double.json {
  color: #d14; }

.meta.diff,
.meta.diff.header {
  color: #75715E; }

.css.support.property-name {
  font-weight: bold;
  color: #333; }

.css.constant {
  color: #099; }

.source.gfm {
  color: #444; }

.gfm .markup.heading {
  color: #111; }

.gfm .link {
  color: #888; }

.gfm .variable.list {
  color: #888; }

.markdown .paragraph {
  color: #444; }

.markdown .heading {
  color: #111; }

.markdown .link {
  color: #888; }

.markdown .link .string {
  color: #888; }

.storage, .storage.declarator {
  font-weight: bold;
  color: #A626A4; }

/* Some preexisting Atom tags, probably not needed but moving to the end */
atom-text-editor {
  background-color: white;
  color: #555; }

atom-text-editor .invisible-character {
  color: rgba(85, 85, 85, 0.2); }

atom-text-editor .indent-guide {
  color: rgba(85, 85, 85, 0.2); }

atom-text-editor .wrap-guide {
  background-color: rgba(85, 85, 85, 0.2); }

atom-text-editor .gutter {
  color: #555;
  background: white; }

atom-text-editor .gutter .line-number.folded,
atom-text-editor .gutter .line-number:after,
atom-text-editor .fold-marker:after {
  color: #e87b00; }

atom-text-editor .invisible {
  color: #555; }

atom-text-editor .selection .region {
  background-color: #e1e1e1; }

atom-text-editor .bracket-matcher .region {
  background-color: #C9C9C9;
  opacity: .7;
  border-bottom: 0 none; }

atom-text-editor.is-focused .cursor {
  border-color: black; }

atom-text-editor.is-focused .selection .region {
  background-color: #afc4da; }

atom-text-editor.is-focused .line-number.cursor-line-no-selection,
atom-text-editor.is-focused .line.cursor-line {
  background-color: rgba(255, 255, 134, 0.34); }

.pod {
  padding: 0;
  margin: 0; }

.pod-content {
  border: #F2C100 0.2em solid;
  margin: 1em;
  padding: 2em;
  border-radius: 1em;
  box-shadow: 0.5em 0.5em 1em #888888; }
  .pod-content dt {
    font-weight: bold;
    margin-bottom: 0.2em; }
  .pod-content dd {
    margin-bottom: 1em; }
  .pod-content h1 a, .pod-content h2 a, .pod-content h3 a, .pod-content h4 a, .pod-content h5 a, .pod-content h6 a {
    color: black; }
  .pod-content h1 {
    padding-top: 0.25em; }

.pod-table tr:nth-child(odd) {
  background-color: rgba(0, 0, 0, 0.031373); }

header {
  text-align: center;
  position: sticky;
  top: 0;
  left: 0;
  width: 100%;
  font-family: sans-serif;
  font-weight: bold;
  border-radius: 0 0 1em 1em;
  margin: 0 0 1em 0;
  padding: 0.5em 0em 0.5em 0em;
  line-height: 0.75em;
  overflow: hidden;
  border-top: none;
  font-size: x-large;
  background: #e6dbd0bd;
  z-index: 10; }
  header #Camelia_bug {
    width: 100px;
    height: 48px;
    float: left; }

kbd {
  font-family: "Droid Sans Mono", "Luxi Mono", "Inconsolata", monospace; }

samp {
  font-family: "Terminus", "Courier", "Lucida Console", monospace; }

u {
  text-decoration: none; }

a {
  text-decoration: none; }

pre {
  background-color: rgba(120, 60, 0, 0.045);
  border: 1px solid #CFCFCF;
  padding: 0.6ex;
  color: black;
  overflow: auto;
  white-space: pre-wrap;
  word-break: break-all; }

nav {
  display: grid;
  grid-gap: 0.75em;
  width: 25vw;
  padding: 0.75em;
  border-radius: 1em;
  background-color: #bbb7b245;
  float: left;
  margin: 0 0.75em 0.7em 0; }

#TOC {
  grid-row: 1; }

#Glossary {
  grid-row: 2; }

.glossary {
  display: grid;
  grid-template-columns: 10% 80% 10%;
  border-radius: inherit;
  padding: 15px;
  background-color: inherit; }
  .glossary > * > a {
    text-decoration: none;
    color: navy; }

.glossary-caption {
  grid-column: 1 / span 3;
  justify-self: center;
  font-size: 120%;
  font-weight: bold; }

.glossary-defn {
  grid-column: 1 / span 2;
  font-size: 11pt;
  line-height: 1.1;
  margin-top: 0.4em;
  color: brown; }
  .glossary-defn.header {
    font-weight: bold; }

.glossary-place {
  grid-column: 2 / span 2;
  line-height: 1.1; }
  .glossary-place.header {
    font-weight: bold;
    color: navy; }

#TOC {
  border-collapse: collapse;
  border-radius: inherit;
  background-color: inherit;
  padding: 15px;
  color: black; }
  #TOC caption {
    text-align: center;
    font-size: 120%;
    font-weight: bold; }
  #TOC tr {
    padding: 0.25pt 5pt 0 0;
    font-size: 11pt; }
    #TOC tr td a {
      text-decoration: none;
      color: navy; }
    #TOC tr.toc-level-1 td {
      padding-top: 4pt;
      font-weight: bold;
      position: relative;
      left: 0; }
      #TOC tr.toc-level-1 td:first-child td {
        padding-top: 0; }
    #TOC tr.toc-level-2 td {
      padding-top: 3pt;
      position: relative;
      left: 6px; }
    #TOC tr.toc-level-3 td {
      padding-top: 2pt;
      font-size: 0.9em;
      position: relative;
      left: 8px; }
    #TOC tr.toc-level-4 td {
      padding-top: 2pt;
      font-size: 0.8em;
      position: relative;
      left: 10px; }

.subtitle {
  font-style: italic;
  text-align: center; }

footer {
  padding: 5px;
  text-align: center;
  font-size: 80%;
  margin: 0 1em 1em;
  border-color: #F2C100;
  background-color: #F5EF7B;
  border-radius: 1em;
  border-style: solid;
  box-shadow: 0.5em 0.5em 1em #888888 p;
    box-shadow-margin: 3px 0; }

.footnptes {
  border-style: solid;
  border-color: blue;
  border-radius: 1em; }

/*# sourceMappingURL=pod.css.map */
</style></head>
	<body class="pod">
<header><svg version="1.1" id="Camelia_bug" xmlns:svg="http://www.w3.org/2000/svg"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="146.887 35.071 679.648 628.263" enable-background="new 146.887 35.071 679.648 628.263" xml:space="preserve">
<g>

		<rect x="341.717" y="326.778" transform="matrix(0.4226 -0.9063 0.9063 0.4226 -99.8267 501.2325)" stroke="#000000" stroke-width="1.0588" stroke-miterlimit="10" width="3.516" height="4.372"/>
	<path id="path21" d="M287.307,517.452c-64.033,12.72-125.053-23.075-136.347-80.045c-11.248-56.844,31.519-113.25,95.512-125.885
		c63.946-12.76,125.053,23.075,136.301,79.919C394.067,448.412,351.299,504.818,287.307,517.452z"/>
	<path id="path25" fill="none" stroke="#000000" stroke-width="4.5546" stroke-linejoin="round" stroke-miterlimit="10" d="
		M287.307,517.452c-64.033,12.72-125.053-23.075-136.347-80.045c-11.248-56.844,31.519-113.25,95.512-125.885
		c63.946-12.76,125.053,23.075,136.301,79.919C394.067,448.412,351.299,504.818,287.307,517.452z"/>
	<path id="path27" d="M440.826,119.408c39.107,71.093,19.552,156.886-43.71,191.57c-63.176,34.724-146.095,5.182-185.117-65.871
		c-39.108-71.093-19.512-156.973,43.664-191.696C318.925,18.728,401.758,48.229,440.826,119.408z"/>
	<path id="path31" fill="none" stroke="#000000" stroke-width="7.611" stroke-linejoin="round" stroke-miterlimit="10" d="
		M440.826,119.408c39.107,71.093,19.552,156.886-43.71,191.57c-63.176,34.724-146.095,5.182-185.117-65.871
		c-39.108-71.093-19.512-156.973,43.664-191.696C318.925,18.728,401.758,48.229,440.826,119.408z"/>
	<path id="path33" fill="#00FF00" d="M327.422,226.986c-13.709-28.626,1.468-64.548,33.873-80.061
		c32.53-15.559,69.983-5.016,83.652,23.696c13.795,28.667-1.342,64.502-33.872,80.061
		C378.63,266.282,341.217,255.652,327.422,226.986z"/>
	<path id="path37" fill="none" d="M327.422,226.986c-13.709-28.626,1.468-64.548,33.873-80.061
		c32.53-15.559,69.983-5.016,83.652,23.696c13.795,28.667-1.342,64.502-33.872,80.061
		C378.63,266.282,341.217,255.652,327.422,226.986z"/>
	<path id="path39" d="M310.944,213.744c-13.755-28.753,1.382-64.588,33.827-80.187c32.53-15.559,70.029-4.89,83.738,23.736
		c13.795,28.667-1.382,64.588-33.912,80.147C362.152,253.04,324.653,242.37,310.944,213.744z"/>
	<path id="path43" fill="none" d="M310.944,213.744c-13.755-28.753,1.382-64.588,33.827-80.187
		c32.53-15.559,70.029-4.89,83.738,23.736c13.795,28.667-1.382,64.588-33.912,80.147C362.152,253.04,324.653,242.37,310.944,213.744
		z"/>
	<path id="path47" fill="none" stroke="#0000FF" stroke-width="22.8331" stroke-linejoin="round" stroke-miterlimit="10" d="
		M331.586,290.7c-24.709-40.572-65.605-82.191-72.02-123.986c-4.804-31.081-18.469-48.78,11.408-63.373
		c28.414-13.703,49.579-32.779,76.581-25.013c26.488,16.966,47.289,29.707,50.718,69.585c-10.664,17.471-22.618,59.3-55.203,66.654
		l-52.16,3.679"/>
	<path id="path49" fill="#FF3366" d="M306.479,185.758c-20.502-9.56-29.535-33.594-20.136-53.752
		c9.4-20.158,33.617-28.686,54.119-19.126c20.502,9.56,29.536,33.594,20.137,53.752C351.2,186.79,326.982,195.319,306.479,185.758z"
		/>
	<path id="path53" fill="none" d="M306.479,185.758c-20.502-9.56-29.535-33.594-20.136-53.752
		c9.4-20.158,33.617-28.686,54.119-19.126c20.502,9.56,29.536,33.594,20.137,53.752C351.2,186.79,326.982,195.319,306.479,185.758z"
		/>
	<path id="path55" fill="#0000FF" d="M330.41,177.62c-10.599,2.713-21.494-3.835-24.299-14.687
		c-2.806-10.852,3.571-21.827,14.256-24.5c10.599-2.713,21.494,3.835,24.213,14.647C347.386,163.932,341.01,174.907,330.41,177.62z"
		/>
	<path id="path59" fill="none" d="M330.41,177.62c-10.599,2.713-21.494-3.835-24.299-14.687c-2.806-10.852,3.571-21.827,14.256-24.5
		c10.599-2.713,21.494,3.835,24.213,14.647C347.386,163.932,341.01,174.907,330.41,177.62z"/>
	<path id="path63" fill="none" stroke="#0000FF" stroke-width="22.8331" stroke-linejoin="round" stroke-miterlimit="10" d="
		M333.649,294.598c-24.755-40.699-79.026-66.006-85.48-107.715c-4.763-31.167-17.983-74.562,11.854-89.069
		c30.129-19.406,60.893-28.028,88.372-15.214c26.614,16.92,50.629,41.438,47.157,66.876c-10.618,17.597-20.445,48.567-53.029,55.921
		l-53.525,12.901"/>
	<path id="path65" fill="#0000FF" d="M345.42,311.413c-4.547,3.229-14.546-3.217-22.289-14.274
		c-7.83-11.097-10.4-22.678-5.853-25.906c4.593-3.102,14.546,3.217,22.375,14.314C347.356,296.69,350.053,308.225,345.42,311.413z"
		/>
	<path id="path69" fill="none" d="M345.42,311.413c-4.547,3.229-14.546-3.217-22.289-14.274c-7.83-11.097-10.4-22.678-5.853-25.906
		c4.593-3.102,14.546,3.217,22.375,14.314C347.356,296.69,350.053,308.225,345.42,311.413z"/>
	<path id="path71" d="M638.408,495.23c31.369,57.102,15.611,126.207-35.251,154.089c-50.901,27.968-117.546,4.232-149-52.91
		c-31.329-57.188-15.61-126.207,35.251-154.088C540.309,414.352,606.994,438.002,638.408,495.23z"/>
	<path id="path75" fill="none" stroke="#000000" stroke-width="4.5546" stroke-linejoin="round" stroke-miterlimit="10" d="
		M638.408,495.23c31.369,57.102,15.611,126.207-35.251,154.089c-50.901,27.968-117.546,4.232-149-52.91
		c-31.329-57.188-15.61-126.207,35.251-154.088C540.309,414.352,606.994,438.002,638.408,495.23z"/>
	<path id="path77" fill="#FFFF00" d="M404.068,481.392c-55.132-25.709-83.124-82.18-62.557-126.285
		c20.527-44.02,81.819-58.962,136.951-33.253c55.132,25.708,83.084,82.266,62.557,126.286
		C520.453,492.244,459.2,507.1,404.068,481.392z"/>
	<path id="path81" fill="none" stroke="#000000" stroke-width="9.1392" stroke-linejoin="round" stroke-miterlimit="10" d="
		M404.068,481.392c-55.132-25.709-83.124-82.18-62.557-126.285c20.527-44.02,81.819-58.962,136.951-33.253
		c55.132,25.708,83.084,82.266,62.557,126.286C520.453,492.244,459.2,507.1,404.068,481.392z"/>
	<path id="path83" fill="#FFFFFF" d="M373.309,368.78c-22.053-10.284-31.529-36.516-21.286-58.483
		c10.284-22.053,36.43-31.57,58.483-21.286c22.053,10.283,31.656,36.47,21.372,58.523
		C421.635,369.501,395.362,379.064,373.309,368.78z"/>
	<path id="path87" fill="none" stroke="#000000" stroke-width="10.6674" stroke-linejoin="round" stroke-miterlimit="10" d="
		M373.309,368.78c-22.053-10.284-31.529-36.516-21.286-58.483c10.284-22.053,36.43-31.57,58.483-21.286
		c22.053,10.283,31.656,36.47,21.372,58.523C421.635,369.501,395.362,379.064,373.309,368.78z"/>
	<path id="path89" d="M702.578,479.741c-79.047,15.683-154.46-28.607-168.371-98.858c-13.998-70.291,38.827-139.942,117.915-155.71
		c79.046-15.682,154.46,28.608,168.371,98.858C834.45,394.409,781.625,464.06,702.578,479.741z"/>
	<path id="path93" fill="none" stroke="#000000" stroke-width="7.611" stroke-linejoin="round" stroke-miterlimit="10" d="
		M702.578,479.741c-79.047,15.683-154.46-28.607-168.371-98.858c-13.998-70.291,38.827-139.942,117.915-155.71
		c79.046-15.682,154.46,28.608,168.371,98.858C834.45,394.409,781.625,464.06,702.578,479.741z"/>
	<path id="path95" fill="#00FF00" d="M731.211,452.297c-30.615,7.853-62.593-13.981-71.492-48.649
		c-8.9-34.668,8.655-69.167,39.27-77.019c30.615-7.853,62.634,13.895,71.493,48.649
		C779.382,409.946,761.826,444.444,731.211,452.297z"/>
	<path id="path99" fill="none" d="M731.211,452.297c-30.615,7.853-62.593-13.981-71.492-48.649
		c-8.9-34.668,8.655-69.167,39.27-77.019c30.615-7.853,62.634,13.895,71.493,48.649
		C779.382,409.946,761.826,444.444,731.211,452.297z"/>
	<path id="path101" d="M712.776,443.701c-30.614,7.853-62.593-13.98-71.491-48.649c-8.9-34.668,8.656-69.166,39.23-76.933
		c30.615-7.853,62.634,13.895,71.533,48.563C760.947,401.35,743.305,435.808,712.776,443.701z"/>
	<path id="path105" fill="none" d="M712.776,443.701c-30.614,7.853-62.593-13.98-71.491-48.649
		c-8.9-34.668,8.656-69.166,39.23-76.933c30.615-7.853,62.634,13.895,71.533,48.563C760.947,401.35,743.305,435.808,712.776,443.701
		z"/>
	<path id="path109" fill="none" stroke="#0000FF" stroke-width="22.8331" stroke-linejoin="round" stroke-miterlimit="10" d="
		M789.433,343.633c7.833-57.28-69.507-72.474-103.424-67.21c-46.75,7.146-40.062,4.496-75.909,26.27
		c-26.81,16.339-32.783,51.414-24.763,83.47c7.547,30.368,19.437,23.536,49.248,32.928c29.81,9.391,37.918,12.018,55.007-6.861
		c21.422-23.676,7.193-65.13-8.027-94.565l-18.155-31.014"/>
	<path id="path111" fill="#FF3366" d="M623.885,391.658c-18.09-8.436-25.74-30.041-17.183-48.39
		c8.556-18.348,30.024-26.376,48.114-17.941c18.004,8.395,25.652,30,17.096,48.349C663.356,392.025,641.889,400.053,623.885,391.658
		z"/>
	<path id="path115" fill="none" d="M623.885,391.658c-18.09-8.436-25.74-30.041-17.183-48.39
		c8.556-18.348,30.024-26.376,48.114-17.941c18.004,8.395,25.652,30,17.096,48.349C663.356,392.025,641.889,400.053,623.885,391.658
		z"/>
	<path id="path117" fill="#0000FF" d="M641.93,382.873c-10.559,2.627-21.367-3.882-24.087-14.693
		c-2.759-10.725,3.53-21.741,14.003-24.408c10.513-2.754,21.368,3.881,24.127,14.606C658.693,369.19,652.443,380.119,641.93,382.873
		z"/>
	<path id="path121" fill="none" d="M641.93,382.873c-10.559,2.627-21.367-3.882-24.087-14.693
		c-2.759-10.725,3.53-21.741,14.003-24.408c10.513-2.754,21.368,3.881,24.127,14.606C658.693,369.19,652.443,380.119,641.93,382.873
		z"/>
	<path id="path125" fill="none" stroke="#0000FF" stroke-width="22.8331" stroke-linejoin="round" stroke-miterlimit="10" d="
		M794.894,344.292c7.833-57.28-81.53-87.623-115.447-82.36c-46.75,7.146-39.326,4.944-75.174,26.718
		c-26.77,16.253-32.613,65.441-24.594,97.497c7.549,30.368,22.886,31.437,52.61,40.788c29.81,9.391,39.309,14.659,56.524-4.266
		c21.383-23.589,32.167-59.986,16.902-89.548l-42.305-46.47"/>
	<path id="path127" fill="#FFFFFF" d="M505.367,430.36c-22.053-10.283-31.615-36.556-21.372-58.523
		c10.284-22.053,36.516-31.53,58.569-21.246c22.053,10.284,31.569,36.43,21.286,58.483
		C553.607,431.041,527.42,440.644,505.367,430.36z"/>
	<path id="path131" fill="none" stroke="#000000" stroke-width="10.6674" stroke-linejoin="round" stroke-miterlimit="10" d="
		M505.367,430.36c-22.053-10.283-31.615-36.556-21.372-58.523c10.284-22.053,36.516-31.53,58.569-21.246
		c22.053,10.284,31.569,36.43,21.286,58.483C553.607,431.041,527.42,440.644,505.367,430.36z"/>
	<path id="path133" d="M383.875,349.271c-11.027-5.142-15.808-18.278-10.666-29.304c5.142-11.027,18.278-15.808,29.305-10.666
		c11.026,5.142,15.722,18.238,10.58,29.265C407.952,349.591,394.901,354.413,383.875,349.271z"/>
	<path id="path137" fill="none" d="M383.875,349.271c-11.027-5.142-15.808-18.278-10.666-29.304
		c5.142-11.027,18.278-15.808,29.305-10.666c11.026,5.142,15.722,18.238,10.58,29.265
		C407.952,349.591,394.901,354.413,383.875,349.271z"/>
	<path id="path139" d="M517.236,408.732c-11.113-5.182-15.808-18.279-10.707-29.219c5.142-11.026,18.152-15.761,29.265-10.579
		c11.026,5.142,15.762,18.152,10.62,29.178C541.313,409.052,528.262,413.874,517.236,408.732z"/>
	<path id="path143" fill="none" d="M517.236,408.732c-11.113-5.182-15.808-18.279-10.707-29.219
		c5.142-11.026,18.152-15.761,29.265-10.579c11.026,5.142,15.762,18.152,10.62,29.178
		C541.313,409.052,528.262,413.874,517.236,408.732z"/>
	<path id="path147" fill="none" stroke="#FF3366" stroke-width="13.6939" stroke-linejoin="round" stroke-miterlimit="10" d="
		M397.357,406.947c-16.697,25.46,53.443,82.183,63.645,35.342l1.085-2.326"/>
	<path id="path151" fill="none" stroke="#000000" stroke-width="10.6674" stroke-linejoin="round" stroke-miterlimit="10" d="
		M466.379,315.38c8.486-22.471,27.9-43.413,27.352-68.104l0.923-23.795l-19.37,13.201l7.592,5.533"/>
	<path id="path155" fill="none" stroke="#000000" stroke-width="10.6674" stroke-linejoin="round" stroke-miterlimit="10" d="
		M490.672,326.708c11.759-20.945,15.236-49.318,34.503-64.77l17.635-16.003l2.338,23.324l-9.12-2.26"/>
	<path id="path157" fill="#FF3366" d="M190.744,447.674c-14.117-29.55,2.34-66.868,36.84-83.501
		c34.546-16.508,73.997-5.976,88.201,23.614c14.117,29.551-2.341,66.868-36.886,83.375
		C244.399,487.795,204.947,477.264,190.744,447.674z"/>
	<path id="path161" fill="none" d="M190.744,447.674c-14.117-29.55,2.34-66.868,36.84-83.501
		c34.546-16.508,73.997-5.976,88.201,23.614c14.117,29.551-2.341,66.868-36.886,83.375
		C244.399,487.795,204.947,477.264,190.744,447.674z"/>
	<path id="path165" fill="none" stroke="#000000" stroke-width="9.1392" stroke-linejoin="round" stroke-miterlimit="10" d="
		M382.992,472.613l-12.01,25.756l3.201,30.02l0,0"/>
	<path id="path169" fill="none" stroke="#000000" stroke-width="9.1392" stroke-linejoin="round" stroke-miterlimit="10" d="
		M414.434,487.275l-12.05,25.842l3.201,30.02l0,0"/>
	<path id="path171" fill="#0000FF" d="M231.881,429.626c-6.401-13.263,4.154-31.624,23.588-40.914
		c19.474-9.377,40.314-6.162,46.76,7.227c6.314,13.222-4.24,31.583-23.628,41C259.167,446.229,238.241,442.974,231.881,429.626z"/>
	<path id="path175" fill="none" d="M231.881,429.626c-6.401-13.263,4.154-31.624,23.588-40.914
		c19.474-9.377,40.314-6.162,46.76,7.227c6.314,13.222-4.24,31.583-23.628,41C259.167,446.229,238.241,442.974,231.881,429.626z"/>
	<path id="path177" fill="#FF3366" d="M565.86,622.698c-31.798,8.139-65.223-15.313-74.743-52.473
		c-9.474-37.034,8.574-73.714,40.245-81.808c31.797-8.14,65.224,15.313,74.784,52.386
		C615.579,577.923,597.571,614.518,565.86,622.698z"/>
	<path id="path181" fill="none" d="M565.86,622.698c-31.798,8.139-65.223-15.313-74.743-52.473
		c-9.474-37.034,8.574-73.714,40.245-81.808c31.797-8.14,65.224,15.313,74.784,52.386
		C615.579,577.923,597.571,614.518,565.86,622.698z"/>
	<path id="path183" fill="#0000FF" d="M549.057,580.463c-14.274,3.623-30.218-10.315-35.548-31.048
		c-5.375-20.86,1.907-40.746,16.266-44.328c14.228-3.749,30.173,10.189,35.547,31.049
		C570.652,556.869,563.372,576.756,549.057,580.463z"/>
	<path id="path187" fill="none" d="M549.057,580.463c-14.274,3.623-30.218-10.315-35.548-31.048
		c-5.375-20.86,1.907-40.746,16.266-44.328c14.228-3.749,30.173,10.189,35.547,31.049
		C570.652,556.869,563.372,576.756,549.057,580.463z"/>

		<text transform="matrix(0.9063 0.4226 -0.4226 0.9063 660.7561 513.2013)" fill="#808080" font-family="'ArialMT'" font-size="15.2079px">T</text>

		<text transform="matrix(0.9063 0.4226 -0.4226 0.9063 669.1085 517.0961)" fill="#808080" font-family="'ArialMT'" font-size="15.2079px">M</text>
	<path id="path195" fill="#0000FF" d="M796.83,365.331c-6.942,1.168-14.899-11.457-17.826-28.344
		c-3.054-16.84,0.203-31.472,7.058-32.68c6.856-1.207,14.899,11.457,17.826,28.344C806.857,349.451,803.686,364.123,796.83,365.331z
		"/>
	<path id="path199" fill="none" d="M796.83,365.331c-6.942,1.168-14.899-11.457-17.826-28.344
		c-3.054-16.84,0.203-31.472,7.058-32.68c6.856-1.207,14.899,11.457,17.826,28.344C806.857,349.451,803.686,364.123,796.83,365.331z
		"/>

		<rect x="551.153" y="428.32" transform="matrix(0.4226 -0.9063 0.9063 0.4226 -70.9303 749.6747)" stroke="#000000" stroke-width="1.0588" stroke-miterlimit="10" width="3.517" height="4.372"/>
</g>
</svg>
<h1 class="title">Gzz::Text::Utils</h1></header><div class="pod-content"><nav><div id="TOC"><table>
<caption>Table of Contents</caption>
<tr class="toc-level-2"><td class="toc-text"><a href="#Table_of_Contents">Table of Contents</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Name">Name</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Copyright">Copyright</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Introduction">Introduction</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#Motivations">Motivations</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#Update">Update</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Exceptions">Exceptions</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#BadArg">BadArg</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#ArgParityMissMatch">ArgParityMissMatch</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#FormatSpecError">FormatSpecError</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Format_and_FormatActions">Format and FormatActions</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#UnhighlightBase_&amp;_UnhighlightBaseActions_and_Unhighlight_&amp;_UnhighlightActions">UnhighlightBase &amp; UnhighlightBaseActions and Unhighlight &amp; UnhighlightActions</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#The_Functions_Provided">The Functions Provided</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Here_are_4_functions_provided_to_centre,_left_and_right_justify_text_even_when_it_is_ANSI_formatted.">Here are 4 functions provided to centre, left and right justify text even when it is ANSI formatted.</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#centre">centre</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#left">left</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#right">right</a></td></tr>
 <tr class="toc-level-4"><td class="toc-text"><a href="#crop-field">crop-field</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#Sprintf">Sprintf</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#Printf">Printf</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#MultiT">MultiT</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#menu">menu</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#dropdown(…)">dropdown(…)</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#lead-dots(…)">lead-dots(…)</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#trailing-dots(…)">trailing-dots(…)</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#dots(…)">dots(…)</a></td></tr>
</table></div>
</nav><div id="Gzz::Text::Utils"></div><div class="subtitle"><p>A Raku module to provide text formatting services to Raku programs.</p></div><div class="pod-body"><section name="___top"><h2 id="Table_of_Contents"><a href="#___top" class="u" title="go to top of document">Table of Contents</a></h2>
<ul>
<li><p><a href="#name">NAME</a></p></li>
<li><p><a href="#author">AUTHOR</a></p></li>
<li><p><a href="#version">VERSION</a></p></li>
<li><p><a href="#title">TITLE</a></p></li>
<li><p><a href="#subtitle">SUBTITLE</a></p></li>
<li><p><a href="#copyright">COPYRIGHT</a></p></li>
<li><p><a href="#introduction">Introduction</a></p></li>
<ul>
<li><p><a href="#motivations">Motivations</a></p></li>
<ul>
<li><p><a href="#update">Update</a></p></li>
</ul>
</ul>
<li><p><a href="#exceptions">Exceptions</a></p></li>
<ul>
<li><p><a href="#badarg">BadArg</a></p></li>
<li><p><a href="#argparitymissmatch">ArgParityMissMatch</a></p></li>
<li><p><a href="#formatspecerror">FormatSpecError</a></p></li>
</ul>
<li><p><a href="#unhighlightbase--unhighlightbaseactions-and-unhighlight--unhighlightactions"><code>UnhighlightBase</code> &amp; <code>UnhighlightBaseActions</code> and <code>Unhighlight</code> &amp; <code>UnhighlightActions</code></a></p></li>
<li><p><a href="#the-functions-provided">The Functions Provided</a></p></li>
<ul>
<li><p><a href="#here-are-4-functions-provided-to-centre-left-and-right-justify-text-even-when-it-is-ansi-formatted">Here are 4 functions provided to <strong><code>centre</code></strong>, <strong><code>left</code></strong> and <strong><code>right</code></strong> justify text even when it is ANSI formatted</a></p></li>
<ul>
<li><p><a href="#centre">centre(…)</a></p></li>
<li><p><a href="#left">left(…)</a></p></li>
<li><p><a href="#right">right(…)</a></p></li>
<ul>
<li><p><a href="#crop-field">crop-field(…)</a></p></li>
</ul>
</ul>
<li><p><a href="#sprintf">Sprintf</a></p></li>
<li><p><a href="#printf">Printf</a></p></li>
<li><p><a href="#multit">MultiT</a></p></li>
<li><p><a href="#menu">menu(…)</a></p></li>
<li><p><a href="#dropdown">dropdown(…)</a></p></li>
<li><p><a href="#lead-dots">lead-dots(…)</a></p></li>
<li><p><a href="#trailing-dots">trailing-dots(…)</a></p></li>
<li><p><a href="#dots">dots(…)</a></p></li>
</ul>
</ul>
<section>
<h1 id="Name"><a href="#___top" class="u" title="go to top of document">NAME</a></h1>
<p>Gzz::Text::Utils </p>
</section>
<section>
<h1 id="Copyright"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">COPYRIGHT</a></h1>
<p>LGPL V3.0+ <a href="https://github.com/grizzlysmit/Gzz-Text-Utils/blob/main/LICENSE">LICENSE</a></p>
</section>
<h1 id="Introduction"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Introduction</a></h1>
<p>A Raku module to provide text formatting services to Raku programs.</p><p>Including a sprintf front-end Sprintf that copes better with Ansi highlighted text and implements <strong><code>%U</code></strong> and does octal as <strong><code>0o123</code></strong> or <strong><code>0O123</code></strong> if you choose <strong><code>%O</code></strong> as I hate ambiguity like <strong><code>0123</code></strong> is it an int with leading zeros or an octal number. Also there is <strong><code>%N</code></strong> for a new line and <strong><code>%T</code></strong> for a tab helpful when you want to use single quotes to stop the <strong>&lt;num&gt; <code>$</code></strong> specs needing back slashes.</p><p>And a <strong><code>printf</code></strong> alike <strong><code>Printf</code></strong>.</p><p>Also it does centring and there is a <strong><code>max-width</code></strong> field in the <strong><code>%</code></strong> spec i.e. <strong><code>%*.*.*E</code></strong>, and more.</p><p><a href="#table-of-contents">Top of Document</a></p><h2 id="Motivations"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Motivations</a></h2>
<p>When you embed formatting information into your text such as <strong>bold</strong>, <em>italics</em>, etc ... and <strong>colours</strong> standard text formatting will not work e.g. printf, sprintf etc also those functions don't do centring.</p><p>Another important thing to note is that even these functions will fail if you include such formatting in the <strong>text</strong> field unless you supply a copy of the text with out the formatting characters in it in the <strong>:ref</strong> field i.e. <strong><code>left($formatted-text, $width, :ref($unformatted-text))</code></strong> or <strong><code>text($formatted-text, $width, :$ref)</code></strong> if the reference text is in a variable called <strong><code>$ref</code></strong> or you can write it as <strong><code>left($formatted-text, $width, ref =&gt; $unformatted-text)</code></strong></p><p><a href="#able-of-contents">Top of Document</a></p><h3 id="Update"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Update</a></h3>
<p>Fixed the proto type of <strong><code>left</code></strong> etc is now </p><pre class="pod-block-code">sub left(Str:D $text, Int:D $width is copy, Str:D $fill = ' ',
            :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;left-global-number-of-chars,
               Str:D :$ref = strip-ansi($text), Int:D
                                :$max-width = 0, Str:D :$ellipsis = '' --&gt; Str) is export 
</pre><p>Where <strong><code>sub strip-ansi(Str:D $text --&gt; Str:D) is export</code></strong> is my new function for striping out ANSI escape sequences so we don't need to supply <strong><code>:$ref</code></strong> unless it contains codes that <strong><code>sub strip-ansi(Str:D $text --&gt; Str:D) is export</code></strong> cannot strip out, if so I would like to know so I can update it to cope with these new codes.</p><p><a href="#table-of-contents">Top of Document</a></p></section><section name="pod"><h1 id="Exceptions"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Exceptions</a></h1>
<h2 id="BadArg"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">BadArg</a></h2>
<pre class="pod-block-code">class BadArg is Exception is export

</pre><p>BadArg is a exception type that Sprintf will throw in case of badly specified arguments.</p><p><a href="#table-of-contents">Top of Document</a></p></section><section name="pod"><h2 id="ArgParityMissMatch"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">ArgParityMissMatch</a></h2>
<pre class="pod-block-code">class ArgParityMissMatch is Exception is export

</pre><p>ArgParityMissMatch is an exception class that Sprintf throws if the number of arguments does not match what the number the format string says there should be.</p><p><strong>NB: if you use <em><code>num$</code></em> argument specs these will not count as they grab from the args add hoc, <em><code>*</code></em> width and precision spec however do count as they consume argument.</strong></p></section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h2 id="FormatSpecError"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">FormatSpecError</a></h2>
<pre class="pod-block-code">class FormatSpecError is Exception is export

</pre><p>FormatSpecError is an exception class that Format (used by Sprintf) throws if there is an error in the Format specification (i.e. <strong><code>%n</code></strong> instead of <strong><code>%N</code></strong> as <strong><code>%n</code></strong> is already taken, the same with using <strong><code>%t</code></strong> instead of <strong><code>%T</code></strong>).</p><p>Or anything else wrong with the Format specifier.</p><p><strong>NB: <em><code>%N</code></em> introduces a <em><code>\n</code></em> character and <em><code>%T</code></em> a tab (i.e. <em><code>\t</code></em>).</strong></p></section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h1 id="Format_and_FormatActions"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Format and FormatActions</a></h1>
<p>Format &amp; FormatActions are a grammar and Actions pair that parse out the <strong>%</strong> spec and normal text chunks of a format string.</p><p>For use by Sprintf a sprintf alternative that copes with ANSI highlighted text.</p></section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h1 id="UnhighlightBase_&amp;_UnhighlightBaseActions_and_Unhighlight_&amp;_UnhighlightActions"><a href="#Gzz::Text::Utils" class="u" title="go to top of document"><code>UnhighlightBase</code> &amp; <code>UnhighlightBaseActions</code> and <code>Unhighlight</code> &amp; <code>UnhighlightActions</code></a></h1>
<p><strong><code>UnhighlightBase</code></strong> &amp; <strong><code>UnhighlightBaseActions</code></strong> are a grammar &amp; role pair that does the work required to to parse apart ansi highlighted text into ANSI highlighted and plain text. </p><p><strong><code>Unhighlight</code></strong> &amp; <strong><code>UnhighlightActions</code></strong> are a grammar &amp; class pair which provide a simple TOP for applying an application of <strong><code>UnhighlightBase</code></strong> &amp; <strong><code>UnhighlightBaseActions</code></strong> for use by <strong><code>sub strip-ansi(Str:D $text --</code> Str:D) is export</strong>&gt; to strip out the plain text from a ANSI formatted string</p></section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h1 id="The_Functions_Provided"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">The Functions Provided</a></h1>
<ul>
<li><p>strip-ansi</p><pre class="pod-block-code">sub strip-ansi(Str:D $text --&gt; Str:D) is export

</pre><p>Strips out all the ANSI escapes, at the moment just those provided by the <strong><code>Terminal::ANSI</code></strong> or <strong><code>Terminal::ANSI::OO</code></strong> modules both available as <strong><code>Terminal::ANSI</code></strong> from zef etc I am not sure how exhaustive that is, but I will implement any more escapes as I become aware of them.</p></li>
</ul>
</section><section name="pod"><ul>
<li><p>hwcswidth</p><pre class="pod-block-code">sub hwcswidth(Str:D $text --&gt; Int:D) is export

</pre><p>Same as <strong><code>wcswidth</code></strong> but it copes with ANSI escape sequences unlike <strong><code>wcswidth</code></strong>.</p></li>
<ul>
<li><p>The secret sauce is that it is defined as:</p><pre class="pod-block-code">sub hwcswidth(Str:D $text --&gt; Int:D) is export {
    return wcswidth(strip-ansi($text));
} #  sub hwcswidth(Str:D $text --&gt; Int:D) is export #


</pre></li>
</ul>
</ul>
</section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h1 id="Here_are_4_functions_provided_to_centre,_left_and_right_justify_text_even_when_it_is_ANSI_formatted."><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Here are 4 functions provided to <strong><code>centre</code></strong>, <strong><code>left</code></strong> and <strong><code>right</code></strong> justify text even when it is ANSI formatted.</a></h1>
<h3 id="centre"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">centre</a></h3>
<ul>
<ul>
<li><p>Centring text in a field.</p><pre class="pod-block-code">sub centre(Str:D $text, Int:D $width is copy, Str:D $fill = ' ',
            :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;centre-global-number-of-chars,
                Str:D :$ref = strip-ansi($text),
                    Int:D :$max-width = 0, Str:D :$ellipsis = '' --&gt; Str) is export 

</pre></li>
<ul>
<li><p><strong><code>centre</code></strong> centres the text <strong><code>$text</code></strong> in a field of width <strong><code>$width</code></strong> padding either side with <strong><code>$fill</code></strong></p></li>
<li><p><strong>Where:</strong></p></li>
<ul>
<li><p><strong><code>$fill</code></strong> is the fill char by default <strong><code>$fill</code></strong> is set to a single white space.</p></li>
<ul>
<li><p>If it requires an odd number of padding then the right hand side will get one more char/codepoint.</p></li>
</ul>
<li><p><strong><code>&amp;number-of-chars</code></strong> takes a function which takes 2 <strong><code>Int:D</code></strong>'s and returns a <strong><code>Bool:D</code></strong>.</p></li>
<ul>
<li><p>By default this is equal to the closure <strong><code>centre-global-number-of-chars</code></strong> which looks like:</p><pre class="pod-block-code">our $centre-total-number-of-chars is export = 0;
our $centre-total-number-of-visible-chars is export = 0;

sub centre-global-number-of-chars(Int:D $number-of-chars,
                                Int:D $number-of-visible-chars --&gt; Bool:D) {
    $centre-total-number-of-chars         = $number-of-chars;
    $centre-total-number-of-visible-chars = $number-of-visible-chars;
    return True
}

</pre></li>
<ul>
<li><p>Which is a closure around the variables: <strong><code>$centre-total-number-of-chars</code></strong> and <strong><code>$centre-total-number-of-visible-chars</code></strong>, these are global <strong><code>our</code></strong> variables that <strong><code>Gzz::Text::Utils</code></strong> exports. But you can just use <strong><code>my</code></strong> variables from with a scope, just as well. And make the <strong><code>sub</code></strong> local to the same scope.</p><p><a href="#table-of-contents">Top of Document</a></p><p>i.e.</p><pre class="pod-block-code">sub Sprintf(Str:D $format-str,
                :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                                        Str:D :$ellipsis = '', *@args --&gt; Str) is export {
    ...
    ...
    ...
    my Int:D $total-number-of-chars = 0;
    my Int:D $total-number-of-visible-chars = 0;
    sub internal-number-of-chars(Int:D $number-of-chars, Int:D $number-of-visible-chars --&gt; Bool:D) {
        $total-number-of-chars += $number-of-chars;
        $total-number-of-visible-chars += $number-of-visible-chars;
        return True;
    } # sub internal-number-of-chars(Int:D $number-of-chars, Int:D $number-of-visible-chars --&gt; Bool:D) #
    ...
    ...
    ...
    for @format-str -&gt; %elt {
        my Str:D $type = %elt«type»;
        if $type eq 'literal' {
            my Str:D $lit = %elt«val»;
            $total-number-of-chars += $lit.chars;
            $total-number-of-visible-chars += strip-ansi($lit).chars;
            $result ~= $lit;
        } elsif $type eq 'fmt-spec' {
            ...
            ...
            ...
            given $spec-char {
                when 'c' {
                             $arg .=Str;
                             $ref .=Str;
                             BadArg.new(:msg(&quot;arg should be one codepoint: {$arg.codes} found&quot;)).throw if $arg.codes != 1;
                             $max-width = max($max-width, $precision, 0) if $max-width &gt; 0; #`« should not really have a both for this
                                                                                                so munge together.
                                                                                                Traditionally sprintf etc treat precision
                                                                                                as max-width for strings. »
                             if $padding eq '' {
                                 if $justify eq '' {
                                     $result ~=  right($arg, $width, :$ref, :number-of-chars(&amp;internal-number-of-chars), :$max-width);
                                 } elsif $justify eq '-' {
                                     $result ~=  left($arg, $width, :$ref, :number-of-chars(&amp;internal-number-of-chars), :$max-width);
                                 } elsif $justify eq '^' {
                                     $result ~=  centre($arg, $width, :$ref, :number-of-chars(&amp;internal-number-of-chars), :$max-width);
                                 }
                             } else {
                                 if $justify eq '' {
                                     $result ~=  right($arg, $width, $padding, :$ref, :number-of-chars(&amp;internal-number-of-chars), :$max-width);
                                 } elsif $justify eq '-' {
                                     $result ~=  left($arg, $width, $padding, :$ref, :number-of-chars(&amp;internal-number-of-chars), :$max-width);
                                 } elsif $justify eq '^' {
                                     $result ~=  centre($arg, $width, $padding, :$ref, :number-of-chars(&amp;internal-number-of-chars), :$max-width);
                                 }
                             }
                         }
                when 's' {
                            ...
                            ...
                            ...
        ...
        ...
        ...
    ...
    ...
    ...
    return $result;
    KEEP {
        &amp;number-of-chars($total-number-of-chars, $total-number-of-visible-chars);
    }
} #`««« sub Sprintf(Str:D $format-str,
                :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                                        Str:D :$ellipsis = '', *@args --&gt; Str) is export »»»

</pre></li>
</ul>
</ul>
<li><p>The parameter <strong><code>:$ref</code></strong> is by default set to the value of <strong><code>strip-ansi($text)</code></strong></p></li>
<ul>
<li><p>This is used to obtain the length of the of the text using <strong><em><code>wcswidth(Str)</code></em></strong> from module <strong>&quot;<code>Terminal::WCWidth</code>&quot;</strong> which is used to obtain the width the text if printed on the current terminal:</p></li>
<ul>
<li><p><strong>NB: <code>wcswidth</code> will return -1 if you pass it text with colours etc embedded in them</strong>.</p></li>
<li><p><strong>&quot;<code>Terminal::WCWidth</code>&quot;</strong> is witten by <strong>bluebear94</strong> <a href="https://raku.land/github:bluebear94">github:bluebear94</a> get it with <strong>zef</strong> or whatever</p></li>
</ul>
</ul>
<li><p><strong><code>:$max-width</code></strong> sets the maximum width of the field but if set to <strong><code>0</code></strong> (The default), will effectively be infinite (∞).</p></li>
<li><p><strong><code>:$ellipsis</code></strong> is used to elide the text if it's too big I recommend either <strong><code>''</code></strong> the default or <strong><code>'…'</code></strong>.</p></li>
</ul>
</ul>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p><h3 id="left"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">left</a></h3>
<ul>
<ul>
<li><p>Left Justifying text.</p><pre class="pod-block-code">sub left(Str:D $text, Int:D $width is copy, Str:D $fill = ' ',
             :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;left-global-number-of-chars,
                    Str:D :$ref = strip-ansi($text), Int:D :$max-width = 0,
                                               Str:D :$ellipsis = '' --&gt; Str) is export

</pre></li>
<ul>
<li><p><strong><code>left</code></strong> is the same except that except that it puts all the padding on the right of the field.</p></li>
</ul>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p><h3 id="right"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">right</a></h3>
<ul>
<ul>
<li><p>Right justifying text.</p><pre class="pod-block-code">sub right(Str:D $text, Int:D $width is copy, Str:D $fill = ' ',
            :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;right-global-number-of-chars,
                    Str:D :$ref = strip-ansi($text), Int:D :$max-width = 0,
                                                 Str:D :$ellipsis = '' --&gt; Str) is export

</pre></li>
<ul>
<li><p><strong><code>right</code></strong> is again the same except it puts all the padding on the left and the text to the right.</p></li>
</ul>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p><h4 id="crop-field"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">crop-field</a></h4>
<ul>
<ul>
<ul>
<li><p>Cropping Text in a field.</p><pre class="pod-block-code">sub crop-field(Str:D $text, Int:D $w is rw, Int:D $width is rw, Bool:D $cropped is rw,
                             Int:D $max-width, Str:D :$ellipsis = '' --&gt; Str:D) is export 

</pre></li>
<ul>
<li><p><strong><code>crop-field</code></strong> used by <strong><code>centre</code></strong>, <strong><code>left</code></strong> and <strong><code>right</code></strong> to crop their input if necessary. Copes with ANSI escape codes.</p></li>
<ul>
<li><p><strong>Where</strong></p></li>
<ul>
<li><p><strong><code>$text</code></strong> is the text to be cropped possibly, wit ANSI escapes embedded. </p></li>
<li><p><strong><code>$w</code></strong> is used to hold the width of <strong><code>$text</code></strong> is read-write so will return that value.</p></li>
<li><p><strong><code>$width</code></strong> is the desired width. Will be used to return the updated width.</p></li>
<li><p><strong><code>$cropped</code></strong> is used to return the status of whether or not <strong><code>$text</code></strong> was truncated.</p></li>
<li><p><strong><code>$max-width</code></strong> is the maximum width we are allowing.</p></li>
<li><p><strong><code>$ellipsis</code></strong> is used to supply a eliding . Empty string by default.</p></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</ul>
</section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h2 id="Sprintf"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Sprintf</a></h2>
<ul>
<li><p>Sprintf like sprintf only it can deal with ANSI highlighted text. And has lots of other options, including the ability to specify a <strong><code>$max-width</code></strong> using <strong><code>width.precision.max-width</code></strong>, which can be <strong><code>.*</code></strong>, <strong><code>*&lt;num&gt;$</code></strong>, <strong><code>.*</code></strong>, or <strong><code>&lt;num&gt;</code></strong></p><pre class="pod-block-code">sub Sprintf(Str:D $format-str,
           :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                           Str:D :$ellipsis = '', *@args --&gt; Str) is export 

</pre></li>
<ul>
<li><p>Where:</p></li>
<ul>
<li><p><strong><code>format-str</code></strong> is is a superset of the <strong><code>sprintf</code></strong> format string, but it has extra features: like the flag <strong><code>[ &lt;char&gt; ]</code></strong> where &lt;char&gt; can be almost anything except <strong><code>[</code></strong>, <strong><code>]</code></strong> <strong>control characters</strong>, <strong>white space other than the normal space</strong>, and <strong><code>max-width</code></strong> after the precision.</p></li>
<ul>
<li><p>The format string looks like this: </p><pre class="pod-block-code">token format      { &lt;chunks&gt;+ }
token chunks      { [ &lt;chunk&gt; || '%' &lt;format-spec&gt; ] }
token chunk       { &lt;-[%]&gt;+ }
token format-spec { [ &lt;fmt-esc&gt; || &lt;fmt-spec&gt; ] }
token fmt-esc     { [      '%' #`« a literal % »
                        || 'N' #`« a nl i.e. \n char but does not require interpolation so no double quotes required »
                        || 'T' #`« a tab i.e. \t char but does not require interpolation so no double quotes required »
                        || 'n' #`« not implemented and will not be, throws an exception if matched »
                        || 't' #`« not implemented and will not be, throws an exception if matched »
                    ]
                  }
token fmt-spec   { [ &lt;dollar-directive&gt; '$' ]? &lt;flags&gt;?  &lt;width&gt;? [ '.' &lt;precision&gt; [ '.' &lt;max-width&gt; ]? ]? &lt;modifier&gt;? &lt;spec-char&gt; }


</pre></li>
<li><p><a href="#table-of-contents">Top of Document</a></p></li>
<ul>
<li><p>Where</p></li>
<ul>
<li><p><strong><code>dollar-directive</code></strong> is a integer &gt;= 1</p></li>
<li><p><strong><code>flags</code></strong> is any zero or more of:</p></li>
<ul>
<li><p><strong><code>+</code></strong> put a plus in front of positive values.</p></li>
<li><p><strong><code>-</code></strong> left justify, right is the default</p></li>
<li><p><strong><code>^</code></strong> centre justify.</p></li>
<li><p><strong><code>#</code></strong> ensure the leading <strong><code>0</code></strong> for any octal, prefix non-zero hexadecimal with <strong><code>0x</code></strong> or <strong><code>0X</code></strong>, prefix non-zero binary with <strong><code>0b</code></strong> or <strong><code>0B</code></strong></p></li>
<li><p><strong><code>v</code></strong> vector flag (used only with d directive)</p></li>
<li><p><strong><code>' '</code></strong> pad with spaces.</p></li>
<li><p><strong><code>0</code></strong> pad with zeros.</p></li>
<li><p><strong><code>[ &lt;char&gt; ]</code></strong> pad with character char where char matches:</p></li>
<ul>
<li><p><strong><code>&lt;-[ &lt;cntrl&gt; \s \[ \] ]&gt; || ' '</code></strong> i.e. anything except control characters, white space (apart from the basic white space (i.e. \x20 or the one with ord 32)), and <strong><code>[</code></strong> and finally <strong><code>]</code></strong>.</p></li>
</ul>
<li><p><a href="#table-of-contents">Top of Document</a></p></li>
</ul>
<li><p><strong><code>width</code></strong> is either an integer or a <strong><code>*</code></strong> or a <strong><code>*</code></strong> followed by an integer &gt;= 1 and a '$'.</p></li>
<li><p><strong><code>precision</code></strong> is a <strong><code>.</code></strong> followed by either an positive integer or a <strong><code>*</code></strong> or a <strong><code>*</code></strong> followed by an integer &gt;= 1 and a '$'.</p></li>
<li><p><strong><code>max-width</code></strong> is a <strong><code>.</code></strong> followed by either an positive integer or a <strong><code>*</code></strong> or a <strong><code>*</code></strong> followed by an integer &gt;= 1 and a '$'.</p></li>
<li><p><strong><code>modifier</code></strong> These are not implemented but is one of:</p></li>
<ul>
<li><p><strong><code>hh</code></strong> interpret integer as a type <strong><code>char</code></strong> or <strong><code>unsigned char</code></strong>.</p></li>
<li><p><strong><code>h</code></strong> interpret integer as a type <strong><code>short</code></strong> or <strong><code>unsigned short</code></strong>.</p></li>
<li><p><strong><code>j</code></strong> interpret integer as a type <strong><code>intmax_t</code></strong>, only with a C99 compiler (unportable).</p></li>
<li><p><strong><code>l</code></strong> interpret integer as a type <strong><code>long</code></strong> or <strong><code>unsigned long</code></strong>.</p></li>
<li><p><strong><code>ll</code></strong> interpret integer as a type <strong><code>long long</code></strong>, <strong><code>unsigned long long</code></strong>, or <strong><code>quad</code></strong> (typically 64-bit integers).</p></li>
<li><p><strong><code>q</code></strong> interpret integer as a type <strong><code>long long</code></strong>, <strong><code>unsigned long long</code></strong>, or <strong><code>quad</code></strong> (typically 64-bit integers).</p></li>
<li><p><strong><code>L</code></strong> interpret integer as a type <strong><code>long long</code></strong>, <strong><code>unsigned long long</code></strong>, or <strong><code>quad</code></strong> (typically 64-bit integers).</p></li>
<li><p><strong><code>t</code></strong> interpret integer as a type <strong><code>ptrdiff_t</code></strong>.</p></li>
<li><p><strong><code>z</code></strong> interpret integer as a type <strong><code>size_t</code></strong>.</p></li>
</ul>
<li><p><a href="#table-of-contents">Top of Document</a></p></li>
<li><p><strong><code>spec-char</code></strong> or the conversion character is one of:</p></li>
<ul>
<li><p><strong><code>c</code></strong> a character with the given codepoint.</p></li>
<li><p><strong><code>s</code></strong> a string.</p></li>
<li><p><strong><code>d</code></strong> a signed integer, in decimal.</p></li>
<li><p><strong><code>u</code></strong> an unsigned integer, in decimal.</p></li>
<li><p><strong><code>o</code></strong> an unsigned integer, in octal, with a <strong><code>0o</code></strong> prepended if the <strong><code>#</code></strong> flag is present.</p></li>
<li><p><strong><code>x</code></strong> an unsigned integer, in hexadecimal, with a <strong><code>0x</code></strong> prepended if the <strong><code>#</code></strong> flag is present.</p></li>
<li><p><strong><code>e</code></strong> a floating-point number, in scientific notation.</p></li>
<li><p><strong><code>f</code></strong> a floating-point number, in fixed decimal notation.</p></li>
<li><p><strong><code>g</code></strong> a floating-point number, in %e or %f notation.</p></li>
<li><p><strong><code>X</code></strong> like <strong><code>x</code></strong>, but using uppercase letters, with a <strong><code>0X</code></strong> prepended if the <strong><code>#</code></strong> flag is present.</p></li>
<li><p><strong><code>E</code></strong> like <strong><code>e</code></strong>, but using an uppercase <strong><code>E</code></strong>.</p></li>
<li><p><strong><code>G</code></strong> like <strong><code>g</code></strong>, but with an uppercase <strong><code>E</code></strong> (if applicable).</p></li>
<li><p><strong><code>b</code></strong> an unsigned integer, in binary, with a <strong><code>0b</code></strong> prepended if the <strong><code>#</code></strong> flag is present.</p></li>
<li><p><strong><code>B</code></strong> an unsigned integer, in binary, with a <strong><code>0B</code></strong> prepended if the <strong><code>#</code></strong> flag is present.</p></li>
<li><p><strong><code>i</code></strong> a synonym for <strong><code>%d</code></strong>.</p></li>
<li><p><strong><code>D</code></strong> a synonym for <strong><code>%ld</code></strong>.</p></li>
<li><p><strong><code>U</code></strong> a synonym for <strong><code>%lu</code></strong>.</p></li>
<li><p><strong><code>O</code></strong> a synonym for <strong><code>%lo</code></strong>.</p></li>
<li><p><strong><code>F</code></strong> a synonym for <strong><code>%f</code></strong>.</p></li>
</ul>
</ul>
</ul>
<li><p><a href="#table-of-contents">Top of Document</a></p></li>
</ul>
<li><p><strong><code>:&amp;number-of-chars</code></strong> is an optional named argument which takes a function with a signature <strong><code>:(Int:D, Int:D --</code> Bool:D)</strong>&gt; if not specified it will have the value of <strong><code>&amp;Sprintf-global-number-of-chars</code></strong> which is defined as:</p><pre class="pod-block-code">our $Sprintf-total-number-of-chars is export = 0;
our $Sprintf-total-number-of-visible-chars is export = 0;

sub Sprintf-global-number-of-chars(Int:D $number-of-chars, Int:D $number-of-visible-chars --&gt; Bool:D) {
    $Sprintf-total-number-of-chars         = $number-of-chars;
    $Sprintf-total-number-of-visible-chars = $number-of-visible-chars;
    return True
}

</pre></li>
<ul>
<li><p>This is exactly the same as the argument by the same name in <strong><code>centre</code></strong>, <strong><code>left</code></strong> and <strong><code>right</code></strong> above.</p><p>i.e. </p><pre class="pod-block-code">sub test( --&gt; True) is export {
    ...
    ...
    ...
    my $test-number-of-chars = 0;
    my $test-number-of-visible-chars = 0;

    sub test-number-of-chars(Int:D $number-of-chars, Int:D $number-of-visible-chars --&gt; Bool:D) {
        $test-number-of-chars         = $number-of-chars;
        $test-number-of-visible-chars = $number-of-visible-chars;
        return True
    }

    put Sprintf('%30.14.14s, %30.14.13s%N%%%N%^*.*s%3$*4$.*3$.*6$d%N%2$^[&amp;]*3$.*4$.*6$s%T%1$[*]^100.*4$.99s',
                                        ${ arg =&gt; $highlighted, ref =&gt; $text }, $text, 30, 14, $highlighted, 13,
                                                                    :number-of-chars(&amp;test-number-of-chars), :ellipsis('…'));
    dd $test-number-of-chars,  $test-number-of-visible-chars;
    put Sprintf('%30.14.14s,  testing %30.14.13s%N%%%N%^*.*s%3$*4$.*3$.*6$d%N%2$^[&amp;]*3$.*4$.*6$s%T%1$[*]^100.*4$.99s',
                                $[ $highlighted, $text ], $text, 30, 14, $highlighted, 13, 13,
                                                                    :number-of-chars(&amp;test-number-of-chars), :ellipsis('…'));
    dd $test-number-of-chars,  $test-number-of-visible-chars;
    ...
    ...
    ...
}

</pre></li>
<ul>
<li><p><strong>Note: This is a closure we should always use a closure if we want to get the number of characters printed.</strong> </p></li>
</ul>
<li><p><a href="#table-of-contents">Top of Document</a></p></li>
</ul>
<li><p><strong><code>:$ellipsis</code></strong> this is an optional argument of type <strong><code>Str:D</code></strong> which defaults to <strong><code>''</code></strong>, if set will be used to mark elided text, if the argument is truncated due to exceeding the value of <strong><code>max-width</code></strong> (note <strong><code>max-width</code></strong> defaults to <strong><code>0</code></strong> which means infinity). The recommended value would be something like <strong><code>…</code></strong>.</p></li>
<li><p><strong><code>*@args</code></strong> is an arbitrary long list of values each argument can be either a scalar value to be printed or a Hash or an Array</p></li>
<ul>
<li><p>If a Hash then it should contain two pairs with keys: <strong><code>arg</code></strong> and <strong><code>ref</code></strong>; denoting the actual argument and a reference argument respectively, the ref argument should be the same as <strong><code>arg</code></strong> but with no ANSI formatting etc to mess up the counting. As this ruins formatting spacing. If not present will be set to <strong><code>strip-ansi($arg)</code></strong>, only bother with all this if <strong><code>strip-ansi($arg)</code></strong> isn't good enough.</p></li>
<li><p>If a Array then it should contain two values. The first being <strong><code>arg</code></strong> and the other being <strong><code>ref</code></strong>; everything else is the same as above.</p></li>
<li><p><strong><code>arg</code></strong> the actual argument.</p></li>
<li><p><strong><code>@args[$i][]</code></strong> the actual argument. Where <strong><code>$i</code></strong> is the current index into the array of args.</p></li>
<li><p><strong><code>@args[$i][1]</code></strong> the reference argument, as in the <strong><code>:$ref</code></strong> arg of the <strong>left</strong>, <strong>right</strong> and <strong>centre</strong> functions which it uses. It only makes sense if your talking strings possibly formatted if not present will be set to <strong><code>strip-ansi($arg)</code></strong> if $arg is a Str or just $arg otherwise.</p></li>
<li><p>If it's a scalar then it's the argument itself. And <strong><code>$ref</code></strong> is <strong><code>strip-ansi($arg)</code></strong> if $arg is a string type i.e. Str or just <strong>C</strong>$arg&gt;&gt; otherwise.</p></li>
<ul>
<li><p><strong><code>ref</code></strong> the reference argument, as in the <strong><code>:$ref</code></strong> arg of the <strong>left</strong>, <strong>right</strong> and <strong>centre</strong> functions which it uses. It only makes sense if your talking strings possibly formatted if not present will be set to <strong><code>strip-ansi($arg)</code></strong> if $arg is a Str or just $arg otherwise.</p><p>i.e.</p><pre class="pod-block-code">put Sprintf('%30.14.14s, %30.14.13s%N%%%N%^*.*s%3$*4$.*3$.*6$d%N%2$^[&amp;]*3$.*4$.*6$s%T%1$[*]^100.*4$.99s',
                            ${ arg =&gt; $highlighted, ref =&gt; $text }, $text, 30, 14, $highlighted, 13,
                                                                        :number-of-chars(&amp;test-number-of-chars), :ellipsis('…'));
dd $test-number-of-chars,  $test-number-of-visible-chars;
put Sprintf('%30.14.14s,  testing %30.14.13s%N%%%N%^*.*s%3$*4$.*3$.*6$d%N%2$^[&amp;]*3$.*4$.*6$s%T%1$[*]^100.*4$.99s',
                            $[ $highlighted, $text ], $text, 30, 14, $highlighted, 13, 13,
                                                                        :number-of-chars(&amp;test-number-of-chars), :ellipsis('…'));
dd $test-number-of-chars,  $test-number-of-visible-chars;

</pre></li>
</ul>
</ul>
</ul>
</ul>
</ul>
</section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h2 id="Printf"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">Printf</a></h2>
<ul>
<li><p>Same as <strong><code>Sprintf</code></strong> but writes it's output to <strong><code>$*OUT</code></strong> or an arbitrary filehandle if you choose.</p></li>
<ul>
<li><p>defined as</p><pre class="pod-block-code">multi sub Printf(Str:D $format-str,
        :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                      Str:D :$ellipsis = '', *@args --&gt; True) is export {
    Sprintf($format-str, :&amp;number-of-chars, :$ellipsis, |@args).print;
} #`««« sub Printf(Str:D $format-str,
         :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                      Str:D :$ellipsis = '', *@args --&gt; True) is export »»»

multi sub Printf(IO::Handle:D $fp, Str:D $format-str,
         :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                      Str:D :$ellipsis = '', *@args --&gt; True) is export {
    $fp.print: Sprintf($format-str, :&amp;number-of-chars, :$ellipsis, |@args);
} #`««« sub Printf(my IO::Handle:D $fp, Str:D $format-str,
         :&amp;number-of-chars:(Int:D, Int:D --&gt; Bool:D) = &amp;Sprintf-global-number-of-chars,
                                      Str:D :$ellipsis = '', *@args --&gt; True) is export »»»

</pre></li>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p></section><section name="pod"><h3 id="MultiT"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">MultiT</a></h3>
<p>A lot of types but not Any.</p><pre class="pod-block-code">subset MultiT is export of Any where * ~~  Str | Int | Rat | Num;

</pre></section><section name="pod"><h3 id="menu"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">menu</a></h3>
<p>Display a text based menu.</p><pre class="pod-block-code">sub menu(@candidates is copy, Str:D $message = &quot;&quot;,
                            Bool:D :c(:color(:$colour)) is copy = False,
                             Bool:D :s(:$syntax) = False --&gt; MultiT) is export

</pre><ul>
<li><p>Where:</p></li>
<ul>
<li><p><strong><code>@candidates</code></strong> is an array of strings to make up the rows of the menu.</p></li>
<li><p><strong><code>:c(:color(:$colour))</code></strong> defines a boolean flag to tell whether to use colours or not.</p></li>
<ul>
<li><p>you can use <strong><code>:c</code></strong>, <strong><code>:color</code></strong> or <strong><code>:colour</code></strong> for this they are all exactly the same.</p></li>
</ul>
<li><p><strong><code>:s(:$syntax)</code></strong> same as <strong><code>$colour</code></strong> except it could result in some sour of syntax highlighting. </p></li>
<ul>
<li><p>for now <strong><code>$syntax</code></strong> is no different from <strong><code>$colour</code></strong> but it may change later.</p></li>
<ul>
<li><p>calls <a href="#dropdown">dropdown</a> to do the colour work.</p></li>
</ul>
</ul>
</ul>
</ul>
</section><section name="pod"><p><a href="#table-of-contents">Top of Document</a></p><h3 id="dropdown(…)"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">dropdown(…)</a></h3>
<p>A text based dropdown/list or menu with ANSI colours.</p><pre class="pod-block-code">sub dropdown(MultiT:D $id, Int:D $window-height, Str:D $id-name,
                &amp;setup-option-str:(Int:D $c, @a --&gt; Str:D),
                    &amp;find-pos:(MultiT $r, Int:D $p, @a --&gt; Int:D),
                        &amp;get-result:(MultiT:D $res, Int:D $p, Int:D $l, @a --&gt; MultiT:D),
                                                                @array --&gt; MultiT) is export  

</pre><ul>
<li><p>Where</p></li>
<ul>
<li><p><strong><code>$id</code></strong> is the starting value of our position in the array/choices.</p></li>
<li><p><strong><code>$window-height</code></strong> is the number of rows of characters to display at a time.</p></li>
<li><p><strong><code>$id-name</code></strong> is the name of the parameter we are scrolling.</p></li>
<li><p><strong><code>&amp;setup-option-str</code></strong> is a function that returns the current row.</p></li>
<ul>
<li><p>Where:</p></li>
<ul>
<li><p>the arg <strong><code>$c</code></strong> will be the position in the array we are </p></li>
<li><p>the arg <strong><code>@a</code></strong> will be the <strong><code>@array</code></strong> supplied to <strong><code>dropdown(…)</code></strong> </p></li>
<ul>
<li><p>the use of a function for this means you can compute a much more complex field.</p></li>
</ul>
</ul>
</ul>
<li><p><strong><code>&amp;find-pos</code></strong> is a function that finds the start position in the <strong><code>dropdown</code></strong>.</p></li>
<ul>
<li><p>Where:</p></li>
<ul>
<li><p>the arg <strong><code>$r</code></strong> is the value in the array <strong><code>@array</code></strong> to look for.</p></li>
<li><p>the arg <strong><code>$p</code></strong> is the best approximation of where it might be if you are using it in a loop or something it could be where it last was. </p></li>
<li><p>the arg <strong><code>@a</code></strong> the argument <strong><code>@array</code></strong> that was passed to <strong><code>dropdown</code></strong>.</p></li>
<ul>
<li><p>you can name these argument anything you like in you function, and because of the computed nature of this function and the other two you have great flexibility.</p></li>
</ul>
</ul>
</ul>
<li><p><strong><code>&amp;get-result</code></strong> is a function to work out the value selected.</p></li>
<ul>
<li><p>Where:</p></li>
<ul>
<li><p>the arg <strong><code>$res</code></strong> is the default value to return.</p></li>
<li><p>the arg <strong><code>$p</code></strong> is the current position in the array <strong><code>@array</code></strong> supplied to <strong><code>dropdown</code></strong>.</p></li>
<li><p>the arg <strong><code>$l</code></strong> is the length of the array <strong><code>@array</code></strong>.</p></li>
<li><p>the arg <strong><code>@a</code></strong> is the array <strong><code>@array</code></strong> that was supplied to <strong><code>dropdown</code></strong>.</p></li>
<ul>
<li><p>Because we use a function we can compute much more complex results; depending on what we have in <strong><code>@array</code></strong>. It still needs to be an Int (for now) but you can do further computations at the end to get other values.</p></li>
</ul>
</ul>
</ul>
<li><p><strong><code>@array</code></strong> is the array to select from.</p></li>
</ul>
</ul>
<p>Here is an example of use.</p><p><a href="#table-of-contents">Top of Document</a></p><pre class="pod-block-code">my &amp;setup-option-str = sub (Int:D $cnt, @array --&gt; Str:D ) {
    my Str $name;
    my Str $cc;
    my Str $flag;
    my Str $prefix;
    if $cnt &lt; 0 {
        $name   = &quot;No country selected yet.&quot;;
        $cc     = &quot;&quot;;
        $flag   = &quot;&quot;;
        $prefix = &quot;you must choose one&quot;;
    } else {
        my %row = @array[$cnt];
        $name   = %row«_name»;
        $cc     = %row«cc»;
        try {
            CATCH {
                default {
                    my $Name = $name;
                    $Name ~~ s:g/ &lt;wb&gt; 'and' &lt;wb&gt; /\&amp;/;
                    try {
                        CATCH {
                            default { $flag = uniparse 'PENGUIN'}
                        }
                        $flag = uniparse $Name;
                    }
                }
            }
            $flag   = uniparse $name;
        }
        $prefix = %row«prefix»;
    }
    return &quot;$flag $name: $cc ($prefix)&quot;
};
my &amp;find-pos = sub (MultiT $result, Int:D $pos, @array --&gt; Int:D) {
    for @array.kv -&gt; $idx, %r {
        if %r{$id-name} == $result {
            $pos = $idx;
            last; # found so don't waste resources #
        }
    }
    return $pos;
}
my &amp;get-result = sub (MultiT:D $result, Int:D $pos, Int:D $length, @array --&gt; MultiT:D ) {
    my $res = $result;
    if $pos ~~ 0..^$length {
      my %row = |%(@array[$pos]);
      $res = %row«id» if %row«id»:exists;
    }
    return $res
};
my Int:D $cc-id        = dropdown($cc_id, 20, 'id',
                                    &amp;setup-option-str, &amp;find-pos, &amp;get-result, @_country);
while !valid-country-cc-id($cc-id, %countries) {
    $cc-id             = dropdown($cc-id, 20, 'id',
                                    &amp;setup-option-str, &amp;find-pos, &amp;get-result, @_country);
}

</pre><p>Or using a much simpler array. <strong>NB: from <code>menu</code></strong></p><p><a href="#table-of-contents">Top of Document</a></p><pre class="pod-block-code">my &amp;setup-option-str = sub (Int:D $cnt, @array --&gt; Str:D ) {
    return @array[$cnt];
};
my &amp;get-result = sub (MultiT:D $result, Int:D $pos, Int:D $length, @array --&gt; MultiT:D ) {
    my $res = $result;
    if $pos ~~ 0..^$length {
      $res = @array[$pos];
    }
    return $res
};
my &amp;find-pos = sub (MultiT $result, Int:D $pos, @array --&gt; Int:D) {
    for @array.kv -&gt; $idx, $r {
        if $r eq $result {
            $pos = $idx;
            last; # found so don't waste resources #
        }
    }
    return $pos;
}
my Str:D $result = dropdown(@candidates[@candidates.elems - 1], 40, 'backup',
                                    &amp;setup-option-str, &amp;find-pos, &amp;get-result, @candidates);

</pre><p><a href="#table-of-contents">Top of Document</a></p></section><section name="pod"><h3 id="lead-dots(…)"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">lead-dots(…)</a></h3>
<p>Returns <strong><code>$text</code></strong> in a field of <strong><code>$width</code></strong> with a line of dots preceding it. Sort of like <strong><code>left</code></strong> with <strong><code>$fill</code></strong> defaulting to <strong><code>.</code></strong> but with a single space between the text and the padding.</p><pre class="pod-block-code">sub lead-dots(Str:D $text, Int:D $width is copy, Str:D $fill = '.' --&gt; Str) is export

</pre><ul>
<li><p>Where:</p></li>
<ul>
<li><p><strong><code>$text</code></strong> the text to be preceded by the dots.</p></li>
<li><p><strong><code>$width</code></strong> the width of the total field.</p></li>
<li><p><strong><code>$fill</code></strong> the fill char or string.</p></li>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p></section><section name="pod"><h3 id="trailing-dots(…)"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">trailing-dots(…)</a></h3>
<p>Returns <strong><code>$text</code></strong> in a field of <strong><code>$width</code></strong> with a line of dots trailing after it. Sort of like <strong><code>right</code></strong> with <strong><code>$fill</code></strong> defaulting to <strong><code>.</code></strong> but with a single space between the text and the padding.</p><pre class="pod-block-code">sub trailing-dots(Str:D $text, Int:D $width is copy, Str:D $fill = '.' --&gt; Str) is export

</pre><ul>
<li><p>Where:</p></li>
<ul>
<li><p><strong><code>$text</code></strong> the text to be trailed by the dots.</p></li>
<li><p><strong><code>$width</code></strong> the width of the total field.</p></li>
<li><p><strong><code>$fill</code></strong> the fill char or string.</p></li>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p></section><section name="pod"><h3 id="dots(…)"><a href="#Gzz::Text::Utils" class="u" title="go to top of document">dots(…)</a></h3>
<p>Returns <strong><code>$text</code></strong> in a field of <strong><code>$width</code></strong> with a line of dots preceding it. Sort of like <strong><code>left</code></strong> with <strong><code>$fill</code></strong> defaulting to <strong><code>.</code></strong>.</p><pre class="pod-block-code">sub dots(Str:D $text, Int:D $width is copy, Str:D $fill = '.' --&gt; Str) is export

</pre><ul>
<li><p>Where:</p></li>
<ul>
<li><p><strong><code>$text</code></strong> the text to be preceded by the dots.</p></li>
<li><p><strong><code>$width</code></strong> the width of the total field.</p></li>
<li><p><strong><code>$fill</code></strong> the fill char or string.</p></li>
</ul>
</ul>
<p><a href="#table-of-contents">Top of Document</a></p></section>		</div>
</div><footer><div>Rendered from <span class="path">UNNAMED</span></div><div>at <span class="time">2023-12-13T11:39:32Z</span></div></footer>
	</body>
</html>

